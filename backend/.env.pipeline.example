# Liquidation Pipeline Configuration Example
# Copy to .env and configure for your environment

# =============================================================================
# OPERATION MODE
# =============================================================================

# Master execution switch (default: false for safety)
# false = recognize-only mode, logs liquidatable users without executing
# true = enables execution pipeline
EXECUTE=false

# Dry-run mode (default: true for safety)
# true = simulate execution without broadcasting transactions
# false = real on-chain execution (requires EXECUTE=true)
DRY_RUN_EXECUTION=true

# =============================================================================
# DETECTION THRESHOLDS
# =============================================================================

# Minimum debt in USD to process (filters out dust)
# Users with debt below this are skipped
MIN_DEBT_USD=200

# Minimum profit in USD to execute
# Liquidations with net profit below this are skipped
MIN_PROFIT_USD=15

# =============================================================================
# SLIPPAGE & GAS
# =============================================================================

# Maximum slippage in basis points (100 bps = 1%)
# Used for DEX swaps to realize collateral profit
MAX_SLIPPAGE_BPS=80

# Gas price ceiling in Gwei
# Skip execution if current gas price exceeds this
GAS_PRICE_CEILING_GWEI=50

# Fixed gas cost estimate in USD
# Used for profitability calculations
GAS_COST_USD=0

# =============================================================================
# CLOSE FACTOR
# =============================================================================

# Close factor in basis points (5000 = 50%)
# Percentage of debt to liquidate in a single transaction
CLOSE_FACTOR_BPS=5000

# =============================================================================
# FLASH LOANS & DEX
# =============================================================================

# Enable flash loans for sourcing repay capital
# false = requires pre-funded executor (safer default)
# true = uses flash loans (more capital efficient, higher complexity)
ALLOW_FLASH=false

# Comma-separated list of DEX routers to use
# Supported: UniswapV3, SushiSwap (extensible)
DEX_ROUTERS=UniswapV3

# =============================================================================
# ASSET CONTROLS
# =============================================================================

# Comma-separated list of allowed asset addresses (lowercase)
# Empty = all assets allowed
# Example: ALLOWED_ASSETS=0x4200000000000000000000000000000000000006,0x833589fcd6edb6e08f4c7c32d4f71b54bda02913
ALLOWED_ASSETS=

# Comma-separated list of denied asset addresses (lowercase)
# These assets will be skipped for liquidations
# Example: DENIED_ASSETS=0xbadtoken,0xscamtoken
DENIED_ASSETS=

# =============================================================================
# RATE LIMITING & SAFETY
# =============================================================================

# Cooldown period in milliseconds after processing a user
# Prevents rapid re-attempts on same user
USER_COOLDOWN_MS=60000

# Maximum number of candidates to track in memory
# LRU eviction when limit reached
MAX_CANDIDATES=300

# Head sweep interval in milliseconds
# How often to check all tracked candidates for HF changes
HEAD_SWEEP_INTERVAL_MS=12000

# =============================================================================
# NETWORK & RPC
# =============================================================================

# Base mainnet RPC URL (required for execution)
# Get from Alchemy, Infura, QuickNode, or public endpoint
RPC_URL=https://mainnet.base.org

# WebSocket RPC URL (required for real-time event monitoring)
# Use WS for lower latency event subscriptions
WS_RPC_URL=wss://mainnet.base.org

# Chain ID (8453 = Base mainnet)
CHAIN_ID=8453

# =============================================================================
# AAVE V3 CONTRACTS (Base Mainnet)
# =============================================================================

# Aave V3 Pool (user account data, liquidation calls)
AAVE_POOL=0xA238Dd80C259a72e81d7e4664a9801593F98d1c5

# Aave Protocol Data Provider (reserve configurations, user reserve data)
AAVE_PROTOCOL_DATA_PROVIDER=0xC4Fcf9893072d61Cc2899C0054877Cb752587981

# Aave Oracle (asset prices)
AAVE_ORACLE=0x2Cc0Fc26eD4563A5ce5e8bdcfe1A2878676Ae156

# Multicall3 (batch verification)
MULTICALL3_ADDRESS=0xca11bde05977b3631167028862be2a173976ca11

# =============================================================================
# EXECUTOR CONTRACT (Required for real execution)
# =============================================================================

# Deployed LiquidationExecutor contract address
# Deploy with: cd contracts && npm run deploy:executor
EXECUTOR_ADDRESS=

# Private key for signing execution transactions
# ⚠️ KEEP SECURE! Use hardware wallet or secure key management in production
EXECUTION_PRIVATE_KEY=

# =============================================================================
# 1INCH INTEGRATION (Optional - for collateral swaps)
# =============================================================================

# 1inch API key (get from https://portal.1inch.dev/)
# If not set, uses public v5 API (rate limited)
ONEINCH_API_KEY=

# 1inch API base URL
# v6 with API key: https://api.1inch.dev/swap/v6.0/8453
# v5 without key: https://api.1inch.exchange/v5.0/8453
ONEINCH_BASE_URL=https://api.1inch.dev/swap/v6.0/8453

# =============================================================================
# SUBGRAPH (Optional - background candidate discovery)
# =============================================================================

# Enable subgraph for candidate seeding (not for decisioning)
# false = on-chain events only (recommended)
# true = supplement with subgraph candidate discovery
USE_SUBGRAPH_DISCOVERY=false

# Aave V3 Base subgraph URL (only if USE_SUBGRAPH_DISCOVERY=true)
SUBGRAPH_URL=https://gateway.thegraph.com/api/subgraphs/id/GQFbb95cE6d8mV989mL5figjaGaKCQB3xqYrr1bRyXqF

# The Graph API key (only if using header-mode endpoint)
GRAPH_API_KEY=

# Subgraph refresh interval in milliseconds
# How often to poll subgraph for new candidates
SUBGRAPH_REFRESH_INTERVAL_MS=1800000

# =============================================================================
# OBSERVABILITY
# =============================================================================

# Enable Prometheus metrics endpoint
# Metrics available at http://localhost:3000/metrics
METRICS_ENABLED=true

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# SERVER
# =============================================================================

# Port for Express server
PORT=3000

# Node environment
NODE_ENV=production

# =============================================================================
# AUTHENTICATION (for API access)
# =============================================================================

# API key for REST endpoints
API_KEY=your_api_key_here

# JWT secret for token generation
JWT_SECRET=your_jwt_secret_here

# =============================================================================
# DATABASE (Optional - for historical tracking)
# =============================================================================

# PostgreSQL connection string
DATABASE_URL=postgres://user:password@localhost:5432/liquidbot

# =============================================================================
# REDIS (Optional - for job queues)
# =============================================================================

# Redis connection
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# =============================================================================
# NOTIFICATIONS (Optional - Telegram alerts)
# =============================================================================

# Telegram bot token (from @BotFather)
TELEGRAM_BOT_TOKEN=

# Telegram chat ID (your user or group chat ID)
TELEGRAM_CHAT_ID=
