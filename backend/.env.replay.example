# Replay Mode Configuration Example
# Usage: REPLAY=1 REPLAY_BLOCK_RANGE=START-END npm run replay

# ====== REPLAY MODE REQUIRED SETTINGS ======
# Enable replay mode
REPLAY=1

# Block range to replay (format: START-END)
# Example: Replay blocks 20000000 to 20000100 on Base
REPLAY_BLOCK_RANGE=20000000-20000100

# RPC URL for historical data (must support archive/historical state queries)
# Falls back to RPC_URL if not set
REPLAY_RPC_URL=https://mainnet.base.org
# Or use an archive node:
# REPLAY_RPC_URL=https://base-mainnet.g.alchemy.com/v2/YOUR_KEY

# ====== REQUIRED FOR OPERATION ======
# API authentication (required by config validation)
API_KEY=replay-api-key
JWT_SECRET=replay-jwt-secret-min-8-chars

# Aave Pool address (Base)
AAVE_POOL_ADDRESS=0xA238Dd80C259a72e81d7e4664a9801593F98d1c5

# ====== OPTIONAL: REDIS (for replay: namespace isolation) ======
# Redis configuration (optional - replay works without Redis)
# REDIS_URL=redis://127.0.0.1:6379
# Or use host/port:
# REDIS_HOST=127.0.0.1
# REDIS_PORT=6379

# ====== CONFIGURATION IMPACT ======
# These settings affect replay behavior and detection metrics:

# Watch set configuration (affects detection coverage)
HOTLIST_ENABLED=true
HOTLIST_MIN_HF=0.99
HOTLIST_MAX_HF=1.03
HOTLIST_MIN_DEBT_USD=5
HOTLIST_MAX=2000
HOTLIST_REVISIT_SEC=5

# Debt and profit filters (affects miss classification)
MIN_DEBT_USD=10
PROFIT_MIN_USD=1

# Fast subset micro-verification
MICRO_VERIFY_ENABLED=true
MICRO_VERIFY_MAX_PER_BLOCK=25

# Predictive HF engine
PREDICTIVE_ENABLED=false

# Hot/warm set tracking
HOT_SET_ENABLED=true
HOT_SET_HF_MAX=1.03
WARM_SET_HF_MAX=1.10
MAX_HOT_SIZE=500
MAX_WARM_SIZE=1000

# Precompute service
PRECOMPUTE_ENABLED=true
PRECOMPUTE_TOP_K=10

# ====== DISABLED IN REPLAY MODE ======
# These are automatically disabled or ignored in replay mode:

# Real-time services (not used in replay)
USE_REALTIME_HF=false
USE_SUBGRAPH=false

# Execution (always disabled in replay - read-only mode)
EXECUTION_ENABLED=false
NOTIFY_ONLY_WHEN_ACTIONABLE=false

# Telegram notifications (not sent in replay)
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_CHAT_ID=

# ====== OUTPUT LOCATION ======
# Replay outputs are written to /tmp/replay-output/:
# - replay-blocks-{START}-{END}-{timestamp}.ndjson
# - replay-summary-{START}-{END}-{timestamp}.json
# - replay-summary-{START}-{END}-{timestamp}-detections.csv
